<!DOCTYPE html>
<html>
<head>
<title>404 - Not Found</title>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<style type="text/css">
body { background-color:#d0d0d0; font-family:sans-serif; padding:0 30px }
div { background-color:#f8f8f8; letter-spacing:4px; max-width:400px; margin:100px auto 0 auto; padding:50px; border-radius:10px; border:1px solid #808080; box-shadow:8px 15px 20px #404040 }
h1 { margin:0; font-size:22px; font-weight:normal }
p { margin:10px 0 0 0; padding-top:2px; font-size:14px; color:#606060; border-top:1px solid #a0a0ff }
@media (max-width:767px) { h1 { font-size:90%; letter-spacing:2px } p { font-size:70% } }
</style>
<script src="js/jquery-3.3.1.min.js"></script>
<script src="js/fabric.min.js"></script>
<script src="js/FileSaver.js"></script>
<script src="js/canvas-toBlob.js"></script>
</head>
<body>
<div>
<h1>Not Found</h1>
<p>404</p>
</div>
<script>
var canvas = new fabric.Canvas('c');
    
canvas.setWidth(300);
canvas.setHeight(300);
canvas.selection = false;
canvas.backgroundColor = 'rgba(0,0,0,0)';
	
document.getElementById("uploader").onchange = function(e) {
var reader = new FileReader();
reader.onload = function(e) {
var image = new Image();
image.src = e.target.result;
image.onload = function() {
var img = new fabric.Image(image);
img.set({
borderColor: 'gray',
cornerColor: 'black',
transparentCorners: true,
left: 100,
top: 60
});
// img.width = canvas.setWidth;
// img.height = canvas.setHeight;
img.scaleToWidth(200);
canvas.add(img).setActiveObject(img).renderAll();
}
}
reader.readAsDataURL(e.target.files[0]);
}
    
fabric.Image.fromURL('img/pain.png', function(img) {
canvas.setOverlayImage(img, canvas.renderAll.bind(canvas));
});

canvas.setOverlayImage('mask.png', canvas.renderAll.bind(canvas));
	
canvas.on({
'object:moving': function(e) {
e.target.opacity = 0.6;
},
'object:modified': function(e) {
e.target.opacity = 1;
}
});

var cw = $(".canvas-container").width();
var ch = $(".canvas-container").height();
if(cw > ch){
/** canvas ist landscape **/
imageinstance.scaleToWidth($(".canvas-container").width() - 200);
imageinstance.scaleToHeight($(".canvas-container").height() - 200);

}else{
/** canvas ist portrait **/
imageinstance.scaleToHeight($(".canvas-container").height() - 200);
imageinstance.scaleToWidth($(".canvas-container").width() - 200);

}
	
function selectFile() {
  document.getElementById("uploader").click();
}
	
$("#download").click(function(){
$("#c").get(0).toBlob(function(blob){
saveAs(blob, "myIMG.png");
});
});
</script>
</body>
</html>
